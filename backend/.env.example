# =============================================================================
# BijbelQuiz Backend Environment Variables
# =============================================================================
# Copy this file to .env.local for local development
# These variables are stored server-side only and never exposed to clients
# =============================================================================

# =============================================================================
# JWT Configuration (Required)
# =============================================================================
# Generate a secure random string for JWT signing
# You can use: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters-long
JWT_AUDIENCE=bijbelquiz-backend
JWT_ISSUER=bijbelquiz-auth

# =============================================================================
# Google Gemini API Configuration (Required for AI features)
# =============================================================================
# Get your API key from: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=your-gemini-api-key-here

# =============================================================================
# Supabase Configuration (Required for database operations)
# =============================================================================
# Supabase Project URL (e.g., https://your-project.supabase.co)
SUPABASE_URL=https://your-project.supabase.co

# Supabase Service Role Key (NEVER expose this to clients!)
# This key bypasses Row Level Security - keep it secret!
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Supabase Anon/Publishable Key (for auth operations)
SUPABASE_ANON_KEY=your-anon-key-here

# =============================================================================
# PostHog Configuration (Required for analytics)
# =============================================================================
# Get your API key from: https://app.posthog.com/project/settings
# NOTE: POSTHOG_HOST varies by PostHog region (US vs EU).
# Default is US: https://us.i.posthog.com
# For EU region, use: https://eu.i.posthog.com
# Update this to match your project's region-specific ingest URL.
POSTHOG_API_KEY=phc_your-posthog-api-key-here
POSTHOG_HOST=https://us.i.posthog.com

# =============================================================================
# Vercel KV Configuration (Required for rate limiting)
# =============================================================================
# These are automatically set when you create a KV store in Vercel
KV_URL=redis://default:password@host.vercel-storage.com:port
KV_REST_API_URL=https://host.vercel-storage.com
KV_REST_API_TOKEN=your-kv-token
KV_REST_API_READ_ONLY_TOKEN=your-kv-readonly-token

# =============================================================================
# CORS Configuration
# =============================================================================
# Comma-separated list of allowed origins
# For local development, add your dev server URLs (e.g., http://localhost:3000, http://localhost:5173)
ALLOWED_ORIGINS=https://bijbelquiz.app,https://www.bijbelquiz.app,https://play.bijbelquiz.app

# =============================================================================
# Rate Limiting Configuration (Optional)
# =============================================================================
# Default rate limit window in milliseconds (default: 60000 = 1 minute)
RATE_LIMIT_WINDOW_MS=60000

# Default max requests per window (default: 60)
RATE_LIMIT_MAX_REQUESTS=60

# =============================================================================
# Logging Configuration (Optional)
# =============================================================================
# Log level: debug, info, warn, error (default: info)
LOG_LEVEL=info

# =============================================================================
# Security Configuration (Optional)
# =============================================================================
# Enable additional security headers (default: true)
SECURITY_HEADERS_ENABLED=true

# =============================================================================
# JWT_SECRET Security Notice
# =============================================================================
# JWT_SECRET must be a cryptographically secure random string with at least
# 256 bits (32 bytes) of entropy. Use one of these commands to generate:
#   - openssl rand -base64 32
#   - node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
#
# NEVER commit JWT_SECRET to source control or hard-code it.
# Store it securely using:
#   - Vercel Environment Variables (for deployment)
#   - Secret manager (AWS Secrets Manager, Google Secret Manager, etc.)
#   - Environment-only deployment settings
#
# Rotate the secret periodically as part of your security practices.
# =============================================================================